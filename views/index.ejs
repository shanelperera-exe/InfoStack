<%- include("partials/header.ejs") %>

<section class="trending-section container-fluid my-4 px-4">
  <div>
    <% if (posts.length === 0) { %>
      <div class="text-center py-5">
        <h4 class="mb-3">No articles yet</h4>
        <a href="/create" class="btn btn-dark">Post Your First Article</a>
        <br>
        <img src="images/logo1.png" alt="logo" class="empty-page-logo">
      </div>
    <% } else { %>
      <div class="row g-4 align-items-start">
        <!-- Left Large Card -->
        <div class="col-lg-6">
          <a href="/article/<%= posts[0].id %>" class="text-decoration-none text-dark">
            <div class="card article-card large-card">
              <div class="card-img-container">
                <img src="<%= posts[0].image %>" class="card-img" alt="Trending Article" />
              </div>
              <div class="card-body overlay-text">
                <h5 class="card-title"><%= posts[0].title %></h5>
                <p class="card-text"><%= posts[0].content.substring(0, 100) %>...</p>
              </div>
            </div>
          </a>
        </div>

        <!-- Middle 2 Small Cards stacked vertically -->
        <div class="col-lg-2 d-flex flex-column gap-4">
          <% for (let i = 1; i <= 2; i++) { %>
            <% if (posts[i]) { %>
              <a href="/article/<%= posts[i].id %>" class="text-decoration-none text-dark">
                <div class="card article-card small-card square-card">
                  <div class="card-img-container">
                    <img src="<%= posts[i].image %>" class="card-img" alt="Article <%= i %>" />
                  </div>
                  <div class="card-body overlay-text">
                    <h6 class="card-title"><%= posts[i].title %></h6>
                    <p class="card-text"><%= posts[i].content.substring(0, 50) %>...</p>
                  </div>
                </div>
              </a>
            <% } else { %>
              <div class="card article-card small-card square-card">
                <div class="card-img-container">
                  <img src="https://via.placeholder.com/300x300" class="card-img" alt="Placeholder" />
                </div>
                <div class="card-body overlay-text">
                  <h6 class="card-title">Coming Soon</h6>
                  <p class="card-text">More articles will appear here as you publish them.</p>
                </div>
              </div>
            <% } %>
          <% } %>
        </div>

        <!-- Right Most Popular Section -->
        <div class="col-lg-4">
          <div class="most-popular-section p-4 rounded">
            <!-- Most Popular Heading -->
            <div class="d-flex justify-content-between align-items-center mb-3">
              <h2 class="h5 m-0">Most Popular</h2>
              <div class="bg-white p-2 d-flex align-items-center justify-content-center">
                <svg style="width: 2rem; height: 2rem;" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 32 32">
                  <path fill="currentColor" d="M20.5 8v2h6.586L18.5 18.586l-4.293-4.293a1 1 0 0 0-1.414 0L2.5 24.586 3.914 26l9.586-9.586 4.293 4.293a1 1 0 0 0 1.414 0l9.293-9.293V18h2V8z"/>
                </svg>
              </div>
            </div>

            <!-- Most Popular List -->
            <ul class="list-unstyled">
              <% posts.forEach(post => { %>
                <li class="mb-4">
                  <div class="d-flex flex-column">
                    <h5 class="mb-1">
                      <a href="<%= post.url %>" class="text-decoration-none text-light">
                        <%= post.title %>
                      </a>
                    </h5>
                    <small style="color: white;">By <a href="<%= post.authorUrl %>" style="color: white;"><%= post.author %></a></small>
                    <hr style="color: white;">
                  </div>
                </li>
              <% }) %>
            </ul>
          </div>
        </div>
      </div>
    <% } %>
  </div>
</section>

<%- include("partials/footer.ejs") %>
